<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Premium Plus</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Left Sidebar -->
        <div class="sidebar">
            <!-- Sidebar Header -->
            <div class="sidebar-header">
                <div class="profile" onclick="openSettings()">
                    <div class="avatar">
                        <i class="bi bi-person-fill"></i>
                    </div>
                    <div class="profile-info">
                        <div class="profile-name" id="accountName">Hesap</div>
                        <span class="premium-badge"><i class="bi bi-star-fill"></i> Premium</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="icon-btn" onclick="openFeatures()" title="Ozellikler">
                        <i class="bi bi-grid-3x3-gap-fill"></i>
                    </button>
                    <button class="icon-btn" onclick="startSync()" title="Senkronize Et">
                        <i class="bi bi-arrow-repeat"></i>
                    </button>
                    <div class="dropdown">
                        <button class="icon-btn" onclick="toggleDropdown('accountMenu')" title="Hesaplar">
                            <i class="bi bi-people-fill"></i>
                        </button>
                        <div class="dropdown-menu account-menu" id="accountMenu">
                            <div class="dropdown-header">Hesaplar</div>
                            <div id="accountMenuList"></div>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-item" onclick="createAccount()">
                                <i class="bi bi-plus-circle"></i> Yeni Hesap
                            </div>
                        </div>
                    </div>
                    <div class="dropdown">
                        <button class="icon-btn" onclick="toggleDropdown('mainMenu')" title="Menu">
                            <i class="bi bi-three-dots-vertical"></i>
                        </button>
                        <div class="dropdown-menu" id="mainMenu">
                            <div class="dropdown-item" onclick="showTab('dashboard')">
                                <i class="bi bi-speedometer2"></i> Dashboard
                            </div>
                            <div class="dropdown-item" onclick="openReports()">
                                <i class="bi bi-graph-up"></i> Raporlar
                            </div>
                            <div class="dropdown-item" onclick="showTab('scripts')">
                                <i class="bi bi-code-slash"></i> Scriptler
                            </div>
                            <div class="dropdown-item" onclick="showTab('auto-reply')">
                                <i class="bi bi-reply-fill"></i> Otomatik Yanit
                            </div>
                            <div class="dropdown-item" onclick="showTab('scheduled')">
                                <i class="bi bi-clock-fill"></i> Zamanli Mesaj
                            </div>
                            <div class="dropdown-item" onclick="showTab('templates')">
                                <i class="bi bi-card-text"></i> Mesaj Sablonlari
                            </div>
                            <div class="dropdown-item" onclick="showTab('webhooks')">
                                <i class="bi bi-link-45deg"></i> Webhooks
                            </div>
                            <div class="dropdown-item" onclick="showTab('users')">
                                <i class="bi bi-people"></i> Kullanicilar
                            </div>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-item" onclick="toggleTheme()">
                                <i class="bi bi-moon-fill"></i> <span id="themeText">Karanlik Mod</span>
                            </div>
                            <div class="dropdown-item" onclick="openSettings()">
                                <i class="bi bi-gear-fill"></i> Ayarlar
                            </div>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-item danger" onclick="logout()">
                                <i class="bi bi-box-arrow-right"></i> Cikis Yap
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Connection Status -->
            <div class="connection-status disconnected" id="connectionStatus">
                <span class="spinner" id="connectionSpinner" style="display:none;"></span>
                <i class="bi bi-wifi-off" id="connectionIcon"></i>
                <span id="connectionText">Bagli Degil</span>
            </div>

            <!-- Search -->
            <div class="search-container">
                <div class="search-box">
                    <i class="bi bi-search"></i>
                    <input type="text" id="searchInput" placeholder="Ara veya yeni sohbet baslat" oninput="filterChats()">
                </div>
                <div class="search-filters">
                    <select id="tagFilter" onchange="filterChats()">
                        <option value="">Tum Etiketler</option>
                    </select>
                    <input type="text" id="noteSearchInput" placeholder="Notta ara" oninput="filterChats()">
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-nav">
                <button class="active" data-tab="chats" onclick="switchSidebarTab('chats')">
                    <i class="bi bi-chat-fill"></i> Sohbetler
                </button>
                <button data-tab="messages" onclick="switchSidebarTab('messages')">
                    <i class="bi bi-envelope-fill"></i> Mesajlar
                </button>
                <button data-tab="logs" onclick="switchSidebarTab('logs')">
                    <i class="bi bi-journal-text"></i> Loglar
                </button>
            </div>

            <!-- Chat List -->
            <div class="chat-list" id="chatList">
                <!-- Chats will be rendered here -->
            </div>

            <!-- Messages Tab Content -->
            <div class="chat-list" id="messagesList" style="display:none;">
                <!-- Messages will be rendered here -->
            </div>
            <div class="list-status" id="messagesListStatus" aria-live="polite"></div>

            <!-- Logs Tab Content -->
            <div class="chat-list" id="logsList" style="display:none;">
                <!-- Logs will be rendered here -->
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="chat-area empty" id="chatArea">
            <!-- Empty State -->
            <div class="empty-chat" id="emptyChatView">
                <svg class="icon" viewBox="0 0 303 172" preserveAspectRatio="xMidYMid meet">
                    <path fill="#DAF7F3" d="M229.565 160.229c32.647-25.274 50.088-67.205 47.498-114.095C274.573 3.44 237.472-3.31 199.564 1.334c-37.907 4.644-76.593 15.5-106.325 39.532-34.807 28.14-59.96 79.238-42.893 123.063 17.067 43.825 72.181 54.025 108.018 34.86 35.837-19.166 38.608-13.49 71.2-38.56z"/>
                    <path fill="#A7E7DD" d="M130.79 148.168c-1.29-2.11-2.47-4.406-3.53-6.894-3.98-9.34-6.21-21.16-6.21-33.94 0-12.78 2.23-24.6 6.21-33.94 4.11-9.65 9.97-15.37 16.13-15.37h78.41c6.16 0 12.02 5.72 16.13 15.37 3.98 9.34 6.21 21.16 6.21 33.94 0 12.78-2.23 24.6-6.21 33.94-4.11 9.65-9.97 15.37-16.13 15.37h-78.41c-4.33 0-8.6-2.91-12.6-8.48z"/>
                    <path fill="#54C7C3" d="M177.28 49.47c-29.68 0-52.88 23.2-52.88 52.88 0 8.62 2.03 16.77 5.64 24l-5.81 29.95a3.77 3.77 0 004.9 4.29l26.7-9.55c7.11 3.87 15.31 6.07 24.01 6.07 29.68 0 52.88-23.2 52.88-52.88s-23.2-52.88-52.88-52.88h-.56z"/>
                </svg>
                <h2>WhatsApp Premium Plus</h2>
                <p>Mesaj gonderin ve alin, otomatik yanitlar olusturun, scriptler yazin ve daha fazlasini yapin. Baslangic icin sol taraftan bir sohbet secin.</p>
            </div>

            <!-- QR Code View -->
            <div class="qr-section" id="qrSection" style="display:none;">
                <div class="qr-code">
                    <img id="qrCode" src="" alt="QR Code">
                </div>
                <h3>WhatsApp Web'e Baglanin</h3>
                <p>1. Telefonunuzdan WhatsApp'i acin<br>
                2. Ayarlar > Bagli Cihazlar > Cihaz Bagla'ya dokunun<br>
                3. Telefonunuzu bu ekrana dogru tutun</p>
            </div>

            <!-- Active Chat View -->
            <div id="activeChatView" style="display:none;">
                <!-- Chat Header -->
                <div class="chat-header">
                    <button class="icon-btn back-btn" onclick="closeChat()" style="display:none;">
                        <i class="bi bi-arrow-left"></i>
                    </button>
                    <div class="avatar" id="chatAvatar">
                        <i class="bi bi-person-fill"></i>
                    </div>
                    <div class="chat-details">
                        <div class="chat-name" id="chatName">Sohbet Adi</div>
                        <div class="chat-status" id="chatStatus">son gorulme yakin zamanda</div>
                    </div>
                    <div class="header-actions">
                        <button class="icon-btn" onclick="searchInChat()" title="Ara">
                            <i class="bi bi-search"></i>
                        </button>
                        <div class="dropdown">
                            <button class="icon-btn" onclick="toggleDropdown('chatMenu')">
                                <i class="bi bi-three-dots-vertical"></i>
                            </button>
                            <div class="dropdown-menu" id="chatMenu">
                                <div class="dropdown-item" onclick="refreshChat()">
                                    <i class="bi bi-arrow-clockwise"></i> Yenile
                                </div>
                                <div class="dropdown-item" onclick="exportChat()">
                                    <i class="bi bi-download"></i> Sohbeti Disa Aktar
                                </div>
                                <div class="dropdown-item" onclick="clearChat()">
                                    <i class="bi bi-trash"></i> Sohbeti Temizle
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chat-meta-panel">
                    <div class="meta-section">
                        <div class="meta-header">
                            <span>Etiketler</span>
                        </div>
                        <div class="tag-list" id="chatTagsList"></div>
                        <div class="tag-actions">
                            <input type="text" id="tagNameInput" list="tagNameOptions" placeholder="Etiket adi">
                            <datalist id="tagNameOptions"></datalist>
                            <input type="color" id="tagColorInput" value="#00a884" title="Etiket rengi">
                            <button class="btn" type="button" onclick="addTagToChat()">Ekle</button>
                        </div>
                    </div>
                    <div class="meta-section">
                        <div class="meta-header">
                            <span>Notlar</span>
                        </div>
                        <div class="notes-list" id="chatNotesList"></div>
                        <div class="note-actions">
                            <textarea id="noteInput" rows="2" placeholder="Bu sohbete not ekleyin"></textarea>
                            <button class="btn" type="button" onclick="addNoteToChat()">Not Ekle</button>
                        </div>
                    </div>
                </div>

                <!-- Messages Container -->
                <div class="messages-container" id="messagesContainer">
                    <!-- Messages will be rendered here -->
                </div>
                <div class="list-status" id="chatMessagesStatus" aria-live="polite"></div>

            <!-- Quick Replies -->
            <div class="quick-replies" id="quickReplies" style="display:none;">
                <!-- Quick reply chips -->
            </div>

            <!-- Attachment Preview -->
            <div class="attachment-preview" id="attachmentPreview" style="display:none;"></div>

            <!-- Chat Input -->
            <div class="chat-input-area">
                <button class="icon-btn emoji-btn" onclick="toggleEmojiPicker()">
                    <i class="bi bi-emoji-smile"></i>
                </button>
                <button class="icon-btn" onclick="openTemplatePicker()" title="Sablon Sec">
                    <i class="bi bi-card-text"></i>
                </button>
                <button class="icon-btn attach-btn" onclick="toggleAttachMenu()">
                    <i class="bi bi-paperclip"></i>
                </button>
                <input type="file" id="mediaInput" class="file-input" />
                <div class="chat-input-container">
                    <textarea id="messageInput" placeholder="Bir mesaj yazin" rows="1" onkeydown="handleInputKeydown(event)" oninput="autoResizeInput(this)"></textarea>
                </div>
                <button class="send-btn" onclick="sendMessage()">
                    <i class="bi bi-send-fill"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Features Panel (Left) -->
    <div class="features-panel" id="featuresPanel">
        <div class="settings-header">
            <button class="icon-btn back-btn" onclick="closeFeatures()">
                <i class="bi bi-arrow-left"></i>
            </button>
            <h3>Premium Ozellikler</h3>
        </div>
        <div class="settings-content">
            <div class="feature-item" onclick="showTab('dashboard')">
                <div class="icon green"><i class="bi bi-speedometer2"></i></div>
                <div class="info">
                    <div class="title">Dashboard</div>
                    <div class="subtitle">Istatistikler ve hizli islemler</div>
                </div>
            </div>
            <div class="feature-item" onclick="showTab('scripts')">
                <div class="icon blue"><i class="bi bi-code-slash"></i></div>
                <div class="info">
                    <div class="title">Script Yoneticisi</div>
                    <div class="subtitle">Ozel JavaScript scriptleri</div>
                </div>
            </div>
            <div class="feature-item" onclick="showTab('auto-reply')">
                <div class="icon purple"><i class="bi bi-reply-fill"></i></div>
                <div class="info">
                    <div class="title">Otomatik Yanitlar</div>
                    <div class="subtitle">Anahtar kelimeye gore yanit</div>
                </div>
            </div>
            <div class="feature-item" onclick="showTab('scheduled')">
                <div class="icon orange"><i class="bi bi-clock-fill"></i></div>
                <div class="info">
                    <div class="title">Zamanli Mesajlar</div>
                    <div class="subtitle">Ileri tarihli mesaj gonder</div>
                </div>
            </div>
            <div class="feature-item" onclick="showTab('templates')">
                <div class="icon teal"><i class="bi bi-card-text"></i></div>
                <div class="info">
                    <div class="title">Mesaj Sablonlari</div>
                    <div class="subtitle">Hazir mesaj kutuphanesi</div>
                </div>
            </div>
            <div class="feature-item" onclick="showTab('webhooks')">
                <div class="icon teal"><i class="bi bi-link-45deg"></i></div>
                <div class="info">
                    <div class="title">Webhooks</div>
                    <div class="subtitle">Olay tetikleyicileri</div>
                </div>
            </div>
            <div class="feature-item" onclick="showTab('drive')">
                <div class="icon red"><i class="bi bi-cloud-upload"></i></div>
                <div class="info">
                    <div class="title">Google Drive</div>
                    <div class="subtitle">Medya yedekleme</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Panel (Right) -->
    <div class="settings-panel" id="settingsPanel">
        <div class="settings-header">
            <button class="icon-btn back-btn" onclick="closeSettings()">
                <i class="bi bi-arrow-left"></i>
            </button>
            <h3>Ayarlar</h3>
        </div>
        <div class="settings-content">
            <!-- Connection Section -->
            <div class="settings-section">
                <div class="settings-section-title">Baglanti</div>
                <div class="settings-item" onclick="reconnect()">
                    <i class="icon bi bi-wifi"></i>
                    <div class="info">
                        <div class="title">Yeniden Baglan</div>
                        <div class="subtitle">WhatsApp baglantisinizi yenileyin</div>
                    </div>
                </div>
                <div class="settings-item" onclick="disconnect()">
                    <i class="icon bi bi-x-circle"></i>
                    <div class="info">
                        <div class="title">Baglanti Kes</div>
                        <div class="subtitle">Oturumu sonlandir</div>
                    </div>
                </div>
            </div>

            <!-- Sync Section -->
            <div class="settings-section">
                <div class="settings-section-title">Senkronizasyon</div>
                <div class="settings-item">
                    <i class="icon bi bi-download"></i>
                    <div class="info">
                        <div class="title">Medyalari Indir</div>
                        <div class="subtitle">Resim ve videolari kaydet</div>
                    </div>
                    <div class="toggle active" id="toggleDownloadMedia" onclick="toggleSetting('downloadMedia')"></div>
                </div>
                <div class="settings-item">
                    <i class="icon bi bi-arrow-repeat"></i>
                    <div class="info">
                        <div class="title">Otomatik Senkronize</div>
                        <div class="subtitle">Baglandiginda mesajlari cek</div>
                    </div>
                    <div class="toggle active" id="toggleSyncOnConnect" onclick="toggleSetting('syncOnConnect')"></div>
                </div>
                <div class="settings-item">
                    <i class="icon bi bi-cloud-arrow-up"></i>
                    <div class="info">
                        <div class="title">Drive'a Yukle</div>
                        <div class="subtitle">Medyalari Google Drive'a kaydet</div>
                    </div>
                    <div class="toggle" id="toggleUploadToDrive" onclick="toggleSetting('uploadToDrive')"></div>
                </div>
            </div>

            <!-- Appearance Section -->
            <div class="settings-section">
                <div class="settings-section-title">Gorunum</div>
                <div class="settings-item" onclick="toggleTheme()">
                    <i class="icon bi bi-moon-fill"></i>
                    <div class="info">
                        <div class="title">Karanlik Mod</div>
                        <div class="subtitle">Gozu yormayan karanlik tema</div>
                    </div>
                    <div class="toggle" id="toggleDarkMode"></div>
                </div>
                <div class="settings-item">
                    <i class="icon bi bi-palette-fill"></i>
                    <div class="info">
                        <div class="title">Vurgu Rengi</div>
                        <div class="subtitle">Arayuz ana rengini degistir</div>
                    </div>
                    <input type="color" id="accentColorPicker" class="color-picker" onchange="updateAccentColor(this.value)">
                </div>
                <div class="settings-item">
                    <i class="icon bi bi-image"></i>
                    <div class="info">
                        <div class="title">Sohbet Duvari</div>
                        <div class="subtitle">Arka plan desenini sec</div>
                    </div>
                    <select id="wallpaperSelect" class="select-input" onchange="updateWallpaperChoice(this.value)">
                        <option value="default">Varsayilan</option>
                        <option value="subtle">Sade</option>
                        <option value="grid">Grid</option>
                        <option value="solid">Duz</option>
                    </select>
                </div>
            </div>

            <!-- Notifications Section -->
            <div class="settings-section">
                <div class="settings-section-title">Bildirimler</div>
                <div class="settings-item">
                    <i class="icon bi bi-bell-fill"></i>
                    <div class="info">
                        <div class="title">Masaustu Bildirimi</div>
                        <div class="subtitle">Yeni mesaj geldiginde bildir</div>
                    </div>
                    <div class="toggle active" id="toggleNotifications" onclick="toggleSetting('notifications')"></div>
                </div>
                <div class="settings-item">
                    <i class="icon bi bi-volume-up-fill"></i>
                    <div class="info">
                        <div class="title">Ses Efektleri</div>
                        <div class="subtitle">Mesaj gonderme/alma sesi</div>
                    </div>
                    <div class="toggle active" id="toggleSounds" onclick="toggleSetting('sounds')"></div>
                </div>
                <div class="settings-item">
                    <i class="icon bi bi-eye-slash-fill"></i>
                    <div class="info">
                        <div class="title">Hayalet Modu</div>
                        <div class="subtitle">Goruldu bilgisi gonderme</div>
                    </div>
                    <div class="toggle" id="toggleGhostMode" onclick="toggleSetting('ghostMode')"></div>
                </div>
            </div>

            <!-- About Section -->
            <div class="settings-section">
                <div class="settings-section-title">Hakkinda</div>
                <div class="settings-item">
                    <i class="icon bi bi-info-circle"></i>
                    <div class="info">
                        <div class="title">WhatsApp Premium Plus</div>
                        <div class="subtitle">Surum 2.0.0</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay" onclick="closeAllPanels()"></div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Feature Modals will be injected here -->
    <div id="modalContainer"></div>

    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/ai-assistant.js"></script>
</body>
</html>
